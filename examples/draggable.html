<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Draggable 예제 - GSAP Kit</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 40px 20px;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    h1 {
      color: white;
      text-align: center;
      margin-bottom: 20px;
      font-size: 3rem;
    }

    .subtitle {
      color: rgba(255, 255, 255, 0.9);
      text-align: center;
      margin-bottom: 50px;
      font-size: 1.2rem;
    }

    .section {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 40px;
      margin-bottom: 30px;
    }

    .section-title {
      color: white;
      font-size: 1.8rem;
      margin-bottom: 20px;
      border-bottom: 2px solid rgba(255, 255, 255, 0.3);
      padding-bottom: 10px;
    }

    .section-description {
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 30px;
      font-size: 1rem;
    }

    /* 기본 드래그 */
    .demo-area {
      background: rgba(255, 255, 255, 0.2);
      border-radius: 15px;
      padding: 40px;
      min-height: 300px;
      position: relative;
    }

    .drag-box {
      width: 120px;
      height: 120px;
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      cursor: grab;
      user-select: none;
      position: absolute;
      left: 20px;
      top: 20px;
    }

    .drag-box:active {
      cursor: grabbing;
    }

    .drag-box.small {
      width: 80px;
      height: 80px;
      font-size: 0.9rem;
    }

    /* X축 드래그 */
    .drag-box-x {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      left: 20px;
      top: 50px;
    }

    /* Y축 드래그 */
    .drag-box-y {
      background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
      left: 50px;
      top: 20px;
    }

    /* 관성 드래그 */
    .drag-box-inertia {
      background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);
      left: 100px;
      top: 80px;
    }

    /* 회전 */
    .rotate-box {
      width: 150px;
      height: 150px;
      background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #333;
      font-weight: bold;
      font-size: 1.2rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      cursor: grab;
      position: absolute;
      left: 50%;
      top: 50%;
      margin-left: -75px;
      margin-top: -75px;
    }

    .rotate-box::before {
      content: '↻';
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 2rem;
    }

    /* 그리드 스냅 */
    .grid-demo {
      background: rgba(255, 255, 255, 0.1);
      background-image:
        repeating-linear-gradient(0deg, rgba(255,255,255,0.1) 0px, rgba(255,255,255,0.1) 1px, transparent 1px, transparent 50px),
        repeating-linear-gradient(90deg, rgba(255,255,255,0.1) 0px, rgba(255,255,255,0.1) 1px, transparent 1px, transparent 50px);
      background-size: 50px 50px;
    }

    .snap-box {
      background: linear-gradient(135deg, #f5af19 0%, #f12711 100%);
      left: 50px;
      top: 50px;
    }

    /* 슬라이더 */
    .slider-container {
      margin: 40px 0;
    }

    .slider-track {
      width: 100%;
      height: 8px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 4px;
      position: relative;
      margin-bottom: 10px;
    }

    .slider-handle {
      width: 40px;
      height: 40px;
      background: white;
      border-radius: 50%;
      position: absolute;
      top: 50%;
      transform: translate(-50%, -50%);
      cursor: grab;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .slider-value {
      color: white;
      font-size: 1.5rem;
      font-weight: bold;
      text-align: center;
    }

    /* 정렬 가능한 리스트 */
    .sortable-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .sortable-item {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 20px 30px;
      border-radius: 10px;
      color: white;
      font-weight: bold;
      cursor: grab;
      user-select: none;
      display: flex;
      align-items: center;
      gap: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      transition: box-shadow 0.3s;
    }

    .sortable-item:hover {
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    }

    .sortable-item::before {
      content: '☰';
      font-size: 1.5rem;
      opacity: 0.6;
    }

    /* 스와이프 */
    .swipe-card {
      width: 300px;
      height: 400px;
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 0 auto;
      cursor: grab;
      position: relative;
      overflow: hidden;
    }

    .swipe-card img {
      width: 100%;
      height: 60%;
      object-fit: cover;
    }

    .swipe-card .content {
      padding: 20px;
      text-align: center;
    }

    .swipe-card h3 {
      color: #333;
      margin-bottom: 10px;
    }

    .swipe-card p {
      color: #666;
      font-size: 0.9rem;
    }

    .swipe-info {
      color: white;
      text-align: center;
      margin-top: 20px;
      font-size: 1.1rem;
    }

    /* 정보 박스 */
    .info-box {
      background: rgba(255, 255, 255, 0.1);
      border-left: 4px solid white;
      padding: 15px 20px;
      margin-top: 20px;
      border-radius: 5px;
      color: white;
    }

    .controls {
      display: flex;
      gap: 10px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    button {
      background: white;
      color: #667eea;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }

    button:hover {
      background: #667eea;
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }

    /* 자유 드래그 */
    .drag-free {
      left: 100px;
      top: 80px;
    }

    /* 경계 제한 드래그 */
    .drag-bounded {
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
      left: 40px !important;
      top: 40px !important;
    }

    /* 제어 가능한 드래그 */
    .drag-controllable {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      left: 100px;
      top: 80px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>🎯 Draggable 예제</h1>
    <p class="subtitle">마우스나 터치로 요소를 드래그해보세요</p>

    <!-- 기본 드래그 -->
    <div class="section">
      <h2 class="section-title">1. 기본 드래그</h2>
      <p class="section-description">자유롭게 모든 방향으로 드래그할 수 있습니다.</p>
      <div class="demo-area">
        <div class="drag-box drag-free">자유 드래그</div>
      </div>
    </div>

    <!-- X/Y축 드래그 -->
    <div class="section">
      <h2 class="section-title">2. 축 제한 드래그</h2>
      <p class="section-description">특정 축으로만 이동합니다.</p>
      <div class="demo-area" style="min-height: 200px;">
        <div class="drag-box drag-box-x small">X축만</div>
      </div>
      <div class="demo-area" style="min-height: 200px; margin-top: 20px;">
        <div class="drag-box drag-box-y small">Y축만</div>
      </div>
    </div>

    <!-- 경계 제한 -->
    <div class="section">
      <h2 class="section-title">3. 경계 제한 드래그</h2>
      <p class="section-description">부모 요소 영역을 벗어날 수 없습니다. (회색 박스 안에서만 드래그 가능)</p>
      <p class="section-description" style="color: #ffeb3b; font-weight: bold;">⚠️ 박스를 클릭해서 드래그해보세요. 콘솔(F12)에서 로그 확인</p>
      <div class="demo-area" id="bounded-area" style="border: 3px dashed rgba(255,255,255,0.5);">
        <div class="drag-box drag-bounded" id="bounded-box">경계 제한<br><small>클릭!</small></div>
      </div>
    </div>

    <!-- 관성 드래그 -->
    <div class="section">
      <h2 class="section-title">4. 관성(던지기) 드래그</h2>
      <p class="section-description">던지면 관성으로 계속 움직입니다.</p>
      <div class="demo-area" id="inertia-area">
        <div class="drag-box drag-box-inertia">던지기</div>
      </div>
    </div>

    <!-- 회전 -->
    <div class="section">
      <h2 class="section-title">5. 회전</h2>
      <p class="section-description">드래그하여 요소를 회전시킵니다.</p>
      <div class="demo-area">
        <div class="rotate-box">회전 드래그</div>
      </div>
    </div>

    <!-- 그리드 스냅 -->
    <div class="section">
      <h2 class="section-title">6. 그리드 스냅</h2>
      <p class="section-description">50px 그리드에 맞춰 스냅됩니다.</p>
      <div class="demo-area grid-demo">
        <div class="drag-box snap-box">그리드 스냅</div>
      </div>
    </div>

    <!-- 슬라이더 -->
    <div class="section">
      <h2 class="section-title">7. 슬라이더</h2>
      <p class="section-description">드래그하여 값을 조절합니다.</p>
      <div class="slider-container">
        <div class="slider-track">
          <div class="slider-handle"></div>
        </div>
        <div class="slider-value">값: <span id="slider-value">50</span></div>
      </div>
    </div>

    <!-- 정렬 가능한 리스트 -->
    <div class="section">
      <h2 class="section-title">8. 정렬 가능한 리스트</h2>
      <p class="section-description">아이템을 드래그하여 순서를 변경하세요.</p>
      <div class="sortable-list">
        <div class="sortable-item">Item 1</div>
        <div class="sortable-item">Item 2</div>
        <div class="sortable-item">Item 3</div>
        <div class="sortable-item">Item 4</div>
        <div class="sortable-item">Item 5</div>
      </div>
    </div>

    <!-- 스와이프 -->
    <div class="section">
      <h2 class="section-title">9. 스와이프 카드</h2>
      <p class="section-description">카드를 좌우로 스와이프하세요.</p>
      <div class="swipe-card">
        <div class="content">
          <h3>스와이프 해보세요</h3>
          <p>👈 왼쪽 또는 오른쪽 👉</p>
          <p style="margin-top: 20px; font-size: 3rem;">🎴</p>
        </div>
      </div>
      <div class="swipe-info" id="swipe-info">스와이프 방향이 여기에 표시됩니다</div>
    </div>

    <!-- 제어 예제 -->
    <div class="section">
      <h2 class="section-title">10. 드래그 제어</h2>
      <p class="section-description">버튼으로 드래그를 활성화/비활성화할 수 있습니다.</p>
      <div class="demo-area" id="controllable-area">
        <div class="drag-box drag-controllable">제어 가능</div>
      </div>
      <div class="controls">
        <button onclick="disableControl()">드래그 비활성화</button>
        <button onclick="enableControl()">드래그 활성화</button>
        <button onclick="resetControl()">위치 초기화</button>
      </div>
    </div>

    <div class="info-box">
      <strong>💡 팁:</strong> 모바일에서는 터치로 드래그할 수 있습니다. GSAP Draggable은 터치 이벤트를 자동으로 지원합니다.
    </div>
  </div>

  <!-- GSAP CDN -->
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.13/dist/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.13/dist/Draggable.min.js"></script>

  <!-- Draggable 함수들 -->
  <script src="../dist/draggable/basic.js"></script>
  <script src="../dist/draggable/advanced.js"></script>

  <!-- 실행 스크립트 -->
  <script>
    // 1. 기본 자유 드래그
    makeDraggable('.drag-free');

    // 2. X축만
    makeDraggableX('.drag-box-x');

    // 3. Y축만
    makeDraggableY('.drag-box-y');

    // 4. 부모 요소 내 경계 제한
    // 직접 Draggable.create 사용하여 테스트
    const boundedBox = document.getElementById('bounded-box');
    const boundedArea = document.getElementById('bounded-area');

    console.log('박스 요소:', boundedBox);
    console.log('부모 영역:', boundedArea);

    if (boundedBox && boundedArea) {
      const boundedDrag = Draggable.create('#bounded-box', {
        type: 'x,y',
        bounds: '#bounded-area',
        cursor: 'grab',
        activeCursor: 'grabbing',
        onDragStart: function() {
          console.log('드래그 시작!');
        },
        onDrag: function() {
          console.log('드래그 중...', this.x, this.y);
        }
      });

      console.log('경계 제한 드래그 인스턴스:', boundedDrag);
    } else {
      console.error('요소를 찾을 수 없습니다!');
    }

    // 5. 관성 효과
    makeDraggableWithInertia('.drag-box-inertia', {
      bounds: '#inertia-area'
    });

    // 6. 회전
    makeRotatable('.rotate-box');

    // 7. 그리드 스냅
    makeDraggableSnap('.snap-box', {
      gridSize: 50,
      bounds: '.grid-demo'
    });

    // 8. 슬라이더
    makeSlider('.slider-handle', {
      axis: 'x',
      min: 0,
      max: 100,
      bounds: '.slider-track',
      onChange: (value) => {
        document.getElementById('slider-value').textContent = Math.round(value);
      }
    });

    // 9. 정렬 가능한 리스트
    makeSortable('.sortable-item', {
      onSort: (newOrder) => {
        console.log('새로운 순서:', newOrder);
      }
    });

    // 10. 스와이프
    makeSwipeable('.swipe-card', {
      threshold: 80,
      onSwipeLeft: () => {
        document.getElementById('swipe-info').textContent = '👈 왼쪽으로 스와이프!';
        document.getElementById('swipe-info').style.color = '#ff6b6b';
      },
      onSwipeRight: () => {
        document.getElementById('swipe-info').textContent = '오른쪽으로 스와이프! 👉';
        document.getElementById('swipe-info').style.color = '#51cf66';
      }
    });

    // 11. 제어 가능한 드래그
    let controllableInstance = makeDraggable('.drag-controllable', {
      bounds: '#controllable-area'
    });

    function disableControl() {
      disableDraggable(controllableInstance);
    }

    function enableControl() {
      enableDraggable(controllableInstance);
    }

    function resetControl() {
      gsap.to('.drag-controllable', {
        x: 0,
        y: 0,
        duration: 0.5,
        ease: "back.out(1.5)"
      });
    }

    // 페이지 로드 애니메이션
    gsap.from('.section', {
      opacity: 0,
      y: 50,
      duration: 0.6,
      stagger: 0.1,
      ease: "power2.out"
    });

    console.log('[GSAP Kit] Draggable 예제가 로드되었습니다');
  </script>
</body>
</html>
