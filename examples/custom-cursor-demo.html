<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GSAP Kit - Custom Cursor Demo</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 40px 20px;
      color: #333;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
    }

    h1 {
      text-align: center;
      color: white;
      font-size: 2.5rem;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
    }

    .subtitle {
      text-align: center;
      color: rgba(255, 255, 255, 0.9);
      font-size: 1.2rem;
      margin-bottom: 40px;
    }

    .demo-card {
      background: white;
      border-radius: 15px;
      padding: 40px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      margin-bottom: 30px;
    }

    .demo-title {
      font-size: 1.8rem;
      font-weight: bold;
      margin-bottom: 15px;
      color: #667eea;
      text-align: center;
    }

    .demo-description {
      font-size: 1rem;
      color: #666;
      margin-bottom: 30px;
      text-align: center;
      line-height: 1.6;
    }

    .demo-area {
      position: relative;
      height: 300px;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      border-radius: 15px;
      margin-bottom: 20px;
      overflow: visible;
      border: 3px dashed rgba(102, 126, 234, 0.3);
    }

    .point {
      position: absolute;
      width: 100px;
      height: 100px;
      background: white;
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.5rem;
      color: #667eea;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
      transition: all 0.3s ease;
    }

    /* .point:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
    } */

    .point-a {
      top: 50%;
      left: 80px;
      transform: translateY(-50%);
    }

    .point-b1 {
      top: 30%;
      right: 80px;
      transform: translateY(-50%);
    }

    .point-b2 {
      top: 70%;
      right: 80px;
      transform: translateY(-50%);
    }

    .instructions {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 10px;
      padding: 20px;
      margin-top: 20px;
    }

    .instructions h3 {
      color: #667eea;
      margin-bottom: 10px;
      font-size: 1.2rem;
    }

    .instructions ul {
      list-style-position: inside;
      color: #666;
      line-height: 2;
      margin-left: 20px;
    }

    .instructions li {
      margin-bottom: 8px;
    }

    .highlight {
      background: #fff3cd;
      padding: 2px 6px;
      border-radius: 4px;
      font-weight: bold;
      color: #856404;
    }

    .status-badge {
      display: inline-block;
      padding: 8px 16px;
      background: #4CAF50;
      color: white;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: bold;
      margin-top: 15px;
    }

    .toggle-section {
      background: rgba(102, 126, 234, 0.1);
      border-radius: 10px;
      padding: 20px;
      margin-top: 20px;
    }

    .toggle-button {
      padding: 12px 24px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(102, 126, 234, 0.3);
    }

    .toggle-button:hover {
      background: #764ba2;
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(102, 126, 234, 0.4);
    }

    .toggle-button:active {
      transform: translateY(0);
    }

    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
        opacity: 1;
      }
      50% {
        transform: scale(1.2);
        opacity: 0.8;
      }
    }

    .line-matching-hint {
      animation: pulse 1s infinite;
    }

    /* Preview Section Styles */
    .preview-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .preview-item {
      background: rgba(102, 126, 234, 0.05);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      border: 2px solid rgba(102, 126, 234, 0.1);
      transition: all 0.3s ease;
    }

    .preview-item:hover {
      border-color: rgba(102, 126, 234, 0.3);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
    }

    .preview-label {
      font-size: 1rem;
      font-weight: bold;
      color: #667eea;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 2px solid rgba(102, 126, 234, 0.2);
    }

    .preview-visual {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
      min-height: 100px;
      justify-content: center;
    }

    .preview-point {
      width: 60px;
      height: 60px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.3rem;
      color: white;
      transition: all 0.3s ease;
    }

    .preview-desc {
      font-size: 0.9rem;
      color: #666;
      font-weight: 500;
    }

    .preview-arrow {
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
    }

    /* Line Preview Styles */
    .line-preview-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .line-preview-item {
      background: rgba(102, 126, 234, 0.05);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      border: 2px solid rgba(102, 126, 234, 0.1);
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
    }

    .line-preview-item:hover {
      border-color: rgba(102, 126, 234, 0.3);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
    }

    .line-preview-label {
      font-size: 0.95rem;
      font-weight: bold;
      color: #667eea;
      width: 100%;
      padding-bottom: 10px;
      border-bottom: 2px solid rgba(102, 126, 234, 0.2);
    }

    .line-preview-svg {
      background: white;
      border-radius: 8px;
      padding: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    /* Parameter Controls - Compact Layout */
    .param-layout {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .param-controls-compact {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px 10px;
    }

    .param-control-compact {
      display: grid;
      grid-template-columns: 38px 1fr 32px;
      align-items: center;
      gap: 6px;
    }

    .param-control-compact label {
      font-size: 0.75rem;
      font-weight: 600;
      color: #3f51b5;
      white-space: nowrap;
    }

    .param-control-compact input[type="range"] {
      width: 100%;
      height: 6px;
      border-radius: 3px;
      background: rgba(63, 81, 181, 0.2);
      outline: none;
      -webkit-appearance: none;
      cursor: pointer;
    }

    .param-control-compact input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: #3f51b5;
      cursor: grab;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
      transition: transform 0.15s ease;
    }

    .param-control-compact input[type="range"]::-webkit-slider-thumb:hover {
      transform: scale(1.15);
    }

    .param-control-compact input[type="range"]::-webkit-slider-thumb:active {
      cursor: grabbing;
      transform: scale(1.05);
    }

    .param-control-compact input[type="range"]::-moz-range-thumb {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: #3f51b5;
      cursor: grab;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
      border: none;
      transition: transform 0.15s ease;
    }

    .param-control-compact input[type="range"]::-moz-range-thumb:hover {
      transform: scale(1.15);
    }

    .param-control-compact input[type="range"]::-moz-range-thumb:active {
      cursor: grabbing;
      transform: scale(1.05);
    }

    .param-control-compact input[type="color"] {
      width: 100%;
      height: 28px;
      border: 2px solid rgba(63, 81, 181, 0.3);
      border-radius: 4px;
      cursor: pointer;
    }

    .param-control-compact select {
      grid-column: 2 / -1;
      padding: 6px 8px;
      border: 2px solid rgba(63, 81, 181, 0.3);
      border-radius: 4px;
      background: white;
      font-size: 0.85rem;
      cursor: pointer;
    }

    .param-control-compact span {
      text-align: right;
      font-weight: bold;
      color: #3f51b5;
      font-family: monospace;
      font-size: 0.7rem;
    }

    .param-code-box {
      background: white;
      border-radius: 8px;
      padding: 12px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }

    .param-render-section,
    .param-code-section {
      display: flex;
      flex-direction: column;
    }

    @media (max-width: 900px) {
      .param-code-box {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üéØ Custom Cursor Demo</h1>
    <p class="subtitle">ÌôîÏÇ¥Ìëú Ïä§ÌÉÄÏùº + Ïª§Ïä§ÌÖÄ Ïª§ÏÑú Í∏∞Îä• ÌÖåÏä§Ìä∏</p>

    <div class="demo-card">
      <div class="demo-title">Arrow Style with Custom Cursor</div>
      <div class="demo-description">
        Ìè¨Ïù∏Ìä∏Î•º ÎìúÎûòÍ∑∏ÌïòÏó¨ Ïó∞Í≤∞Ìï† Îïå <strong>ÏãúÏä§ÌÖú Ïª§ÏÑúÍ∞Ä Ïà®Í≤®ÏßÄÍ≥†</strong> ÌôîÏÇ¥Ìëú Î™®ÏñëÏùò Ïª§Ïä§ÌÖÄ Ïª§ÏÑúÍ∞Ä ÌëúÏãúÎê©ÎãàÎã§.<br>
        Ïó∞Í≤∞Îêú Ìè¨Ïù∏Ìä∏Î•º ÌÅ¥Î¶≠ÌïòÎ©¥ ÏûêÎèôÏúºÎ°ú Ìï¥Ï†úÎêòÍ≥† ÏãúÏûëÏ†êÏóêÏÑú Îã§Ïãú Ïó∞Í≤∞ÏùÑ ÏãúÏûëÌï† Ïàò ÏûàÏäµÎãàÎã§.
      </div>

      <div class="demo-area" id="demo-custom-cursor">
        <div class="point point-a" data-id="a">A</div>
        <div class="point point-b1" data-id="b1">B1</div>
        <div class="point point-b2" data-id="b2">B2</div>
      </div>

      <div class="instructions">
        <h3>üìù ÏÇ¨Ïö© Î∞©Î≤ï</h3>
        <ul>
          <li><span class="highlight">A Ìè¨Ïù∏Ìä∏</span>Î•º ÌÅ¥Î¶≠ÌïòÍ±∞ÎÇò ÎìúÎûòÍ∑∏ÌïòÏó¨ B1 ÎòêÎäî B2Î°ú Ïó∞Í≤∞ÌïòÏÑ∏Ïöî</li>
          <li>ÎìúÎûòÍ∑∏ Ï§ëÏóêÎäî <strong>ÏãúÏä§ÌÖú Ïª§ÏÑúÍ∞Ä ÏûêÎèôÏúºÎ°ú Ïà®Í≤®ÏßÄÍ≥†</strong> ÌôîÏÇ¥Ìëú Ïª§ÏÑúÍ∞Ä ÌëúÏãúÎê©ÎãàÎã§</li>
          <li>Ïó∞Í≤∞Ïù¥ ÏôÑÎ£åÎêòÎ©¥ ÏãúÏä§ÌÖú Ïª§ÏÑúÍ∞Ä Îã§Ïãú ÎÇòÌÉÄÎÇ©ÎãàÎã§</li>
          <li>Ïó∞Í≤∞Îêú Ìè¨Ïù∏Ìä∏(B1 ÎòêÎäî B2)Î•º ÌÅ¥Î¶≠ÌïòÎ©¥ Ïó∞Í≤∞Ïù¥ Ìï¥Ï†úÎêòÍ≥† AÏóêÏÑú Ïû¨ÏãúÏûëÎê©ÎãàÎã§</li>
          <li>Î∞∞Í≤ΩÏùÑ ÌÅ¥Î¶≠ÌïòÎ©¥ ÏÑ†ÌÉùÏù¥ Ï∑®ÏÜåÎê©ÎãàÎã§</li>
        </ul>

        <div class="status-badge">‚úÖ hideCursor: true (ÏãúÏä§ÌÖú Ïª§ÏÑú Ïà®ÍπÄ ÌôúÏÑ±Ìôî)</div>
      </div>

      <div class="toggle-section">
        <h3>üîß ÏòµÏÖò ÌÖåÏä§Ìä∏</h3>
        <p style="margin-bottom: 15px; color: #666;">
          ÌòÑÏû¨ <strong>hideCursor</strong> ÏòµÏÖòÏù¥ ÌôúÏÑ±ÌôîÎêòÏñ¥ ÏûàÏäµÎãàÎã§.
          ÏïÑÎûò Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÏó¨ ÎπÑÌôúÏÑ±ÌôîÌïòÍ≥† ÏãúÏä§ÌÖú Ïª§ÏÑúÏôÄ Ïª§Ïä§ÌÖÄ Ïª§ÏÑúÍ∞Ä Ìï®Íªò ÌëúÏãúÎêòÎäî Í≤ÉÏùÑ ÌôïÏù∏Ìï† Ïàò ÏûàÏäµÎãàÎã§.
        </p>
        <button class="toggle-button" onclick="toggleCursorMode()">
          hideCursor Î™®Îìú Ï†ÑÌôò
        </button>
        <p id="mode-status" style="margin-top: 10px; font-weight: bold; color: #667eea;"></p>
      </div>

      <div class="toggle-section" style="margin-top: 20px; background: rgba(255, 193, 7, 0.1); border: 2px solid rgba(255, 193, 7, 0.3);">
        <h3>üêõ ÎìúÎûòÍ∑∏ ÏÉÅÌÉú ÎîîÎ≤ÑÍ∑∏</h3>
        <p style="margin-bottom: 15px; color: #666;">
          ÎìúÎûòÍ∑∏ Ï§ëÏù∏ ÏÑ†Ïù¥ ÎÑàÎ¨¥ Îπ®Î¶¨ ÏÇ¨ÎùºÏ†∏ÏÑú ÌôïÏù∏ÌïòÍ∏∞ Ïñ¥Î†§Ïö∞Ïã†Í∞ÄÏöî?<br>
          ÏïÑÎûò Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÎ©¥ ÎìúÎûòÍ∑∏ Ï§ëÏù∏ ÏÉÅÌÉúÎ•º <strong>Í≥†Ï†ï</strong>ÏãúÏºúÏÑú Ï≤úÏ≤úÌûà ÌôïÏù∏Ìï† Ïàò ÏûàÏäµÎãàÎã§.
        </p>
        <button class="toggle-button" style="background: #FFC107; margin-right: 10px;" onclick="freezeDragState()">
          ÎìúÎûòÍ∑∏ ÏÉÅÌÉú Í≥†Ï†ï (A ‚Üí B1)
        </button>
        <button class="toggle-button" style="background: #F44336;" onclick="unfreezeDragState()">
          Í≥†Ï†ï Ìï¥Ï†ú
        </button>
        <p id="debug-status" style="margin-top: 10px; font-weight: bold; color: #FFC107;"></p>
      </div>

      <div class="toggle-section" style="margin-top: 20px; background: rgba(63, 81, 181, 0.1); border: 2px solid rgba(63, 81, 181, 0.3);">
        <h3 style="margin-bottom: 10px;">üé® Marker-End ÌååÎùºÎØ∏ÌÑ∞ Ï°∞Ï†ï</h3>
        <p style="margin-bottom: 15px; color: #666; font-size: 0.9rem;">
          ÏúÑÏùò Îç∞Î™® ÏòÅÏó≠ÏóêÏÑú "ÎìúÎûòÍ∑∏ ÏÉÅÌÉú Í≥†Ï†ï" Î≤ÑÌäºÏùÑ Î®ºÏ†Ä ÌÅ¥Î¶≠Ìïú ÌõÑ, ÏïÑÎûò ÌååÎùºÎØ∏ÌÑ∞Î•º Ï°∞Ï†ïÌïòÏÑ∏Ïöî.
        </p>

        <div class="param-layout">
          <!-- ÏôºÏ™Ω: Ïª®Ìä∏Î°§ -->
          <div class="param-controls-compact">
            <div class="param-control-compact">
              <label for="refX">refX</label>
              <input type="range" id="refX" min="0" max="30" value="12" step="0.5" oninput="updateMarkerParams()">
              <span id="refXValue">12</span>
            </div>

            <div class="param-control-compact">
              <label for="refY">refY</label>
              <input type="range" id="refY" min="0" max="30" value="7.5" step="0.5" oninput="updateMarkerParams()">
              <span id="refYValue">7.5</span>
            </div>

            <div class="param-control-compact">
              <label for="lineWidth">Line W</label>
              <input type="range" id="lineWidth" min="1" max="10" value="3" step="0.5" oninput="updateMarkerParams()">
              <span id="lineWidthValue">3</span>
            </div>

            <div class="param-control-compact">
              <label for="markerScale">Scale</label>
              <input type="range" id="markerScale" min="0.3" max="3" value="1" step="0.1" oninput="updateMarkerParams()">
              <span id="markerScaleValue">1</span>
            </div>

            <div class="param-control-compact">
              <label for="markerColor">Color</label>
              <input type="color" id="markerColor" value="#667eea" oninput="updateMarkerParams()">
              <span id="markerColorValue" style="font-size: 0.65rem; overflow: hidden; text-overflow: ellipsis;">#667eea</span>
            </div>

            <div class="param-control-compact" style="grid-column: 1 / -1;">
              <label for="polygonShape">Shape</label>
              <select id="polygonShape" onchange="updateMarkerParams()">
                <option value="polygon:0,0 0,15 15,7.5">ÏÇºÍ∞ÅÌòï (‚ñ∂)</option>
                <option value="circle:7.5">ÏõêÌòï (‚óè)</option>
                <option value="circle-stroke:7.5">Îπà ÏõêÌòï (‚óã)</option>
                <option value="chevron:7.5">Ïó¥Î¶∞ ÏÇºÍ∞ÅÌòï (‚ä≥)</option>
              </select>
            </div>

            <div class="param-control-compact" style="grid-column: 1 / -1; display: flex; align-items: center; gap: 10px;">
              <input type="checkbox" id="markerUnits" onchange="updateMarkerParams()" style="width: auto;">
              <label for="markerUnits" style="font-size: 0.8rem; margin: 0;">markerUnits="strokeWidth" (ÏÑ† ÍµµÍ∏∞Ïóê ÎπÑÎ°Ä)</label>
            </div>
          </div>

          <!-- ÏΩîÎìú & Î†åÎçîÎßÅ -->
          <div class="param-code-box">
            <!-- ÏôºÏ™Ω: Ïã§ÏãúÍ∞Ñ Î†åÎçîÎßÅ -->
            <div class="param-render-section">
              <h4 style="margin-bottom: 8px; color: #3f51b5; font-size: 0.95rem;">Ïã§ÏãúÍ∞Ñ Î†åÎçîÎßÅ:</h4>
              <div id="svgPreview" style="background: white; border: 2px solid #e0e0e0; border-radius: 4px; padding: 20px; height: 120px; display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative;">
                <!-- SVG Î†åÎçîÎßÅ ÏòÅÏó≠ -->
              </div>
            </div>

            <!-- Ïò§Î•∏Ï™Ω: SVG ÏΩîÎìú -->
            <div class="param-code-section">
              <h4 style="margin-bottom: 8px; color: #3f51b5; font-size: 0.95rem;">SVG ÏΩîÎìú:</h4>
              <pre id="paramCode" style="background: #f5f5f5; padding: 8px; border-radius: 4px; overflow-x: auto; font-size: 0.75rem; margin: 0; line-height: 1.4; flex: 1;"></pre>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Line Shape Preview Section -->
    <div class="demo-card">
      <div class="demo-title">üìè ÎìúÎûòÍ∑∏ ÏÑ† ÌòïÌÉú ÌîÑÎ¶¨Î∑∞</div>
      <div class="demo-description">
        ÎìúÎûòÍ∑∏ Ï§ëÏóê Ïã§Ï†úÎ°ú ÌëúÏãúÎêòÎäî ÌôîÏÇ¥Ìëú ÏÑ†Ïùò Î™®ÏñëÏùÑ Îã§ÏñëÌïú Í∞ÅÎèÑÏôÄ Í∏∏Ïù¥Î°ú ÎØ∏Î¶¨ ÌôïÏù∏Ìï† Ïàò ÏûàÏäµÎãàÎã§.
      </div>

      <div class="line-preview-grid">
        <!-- ÏßßÏùÄ ÏÑ† -->
        <div class="line-preview-item">
          <div class="line-preview-label">ÏßßÏùÄ Í±∞Î¶¨ (50px)</div>
          <svg class="line-preview-svg" width="150" height="80" viewBox="0 0 150 80">
            <defs>
              <marker id="arrow-short" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                <polygon points="0,0 0,15 15,7.5" fill="#667eea" />
              </marker>
            </defs>
            <line x1="30" y1="40" x2="80" y2="40" stroke="#667eea" stroke-width="3" marker-end="url(#arrow-short)" />
            <circle cx="30" cy="40" r="4" fill="#FFD700" />
          </svg>
        </div>

        <!-- Ï§ëÍ∞Ñ ÏÑ† -->
        <div class="line-preview-item">
          <div class="line-preview-label">Ï§ëÍ∞Ñ Í±∞Î¶¨ (100px)</div>
          <svg class="line-preview-svg" width="150" height="80" viewBox="0 0 150 80">
            <defs>
              <marker id="arrow-medium" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                <polygon points="0,0 0,15 15,7.5" fill="#667eea" />
              </marker>
            </defs>
            <line x1="20" y1="40" x2="120" y2="40" stroke="#667eea" stroke-width="3" marker-end="url(#arrow-medium)" />
            <circle cx="20" cy="40" r="4" fill="#FFD700" />
          </svg>
        </div>

        <!-- Í∏¥ ÏÑ† -->
        <div class="line-preview-item">
          <div class="line-preview-label">Í∏¥ Í±∞Î¶¨ (150px)</div>
          <svg class="line-preview-svg" width="180" height="80" viewBox="0 0 180 80">
            <defs>
              <marker id="arrow-long" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                <polygon points="0,0 0,15 15,7.5" fill="#667eea" />
              </marker>
            </defs>
            <line x1="15" y1="40" x2="165" y2="40" stroke="#667eea" stroke-width="3" marker-end="url(#arrow-long)" />
            <circle cx="15" cy="40" r="4" fill="#FFD700" />
          </svg>
        </div>

        <!-- ÏúÑÎ°ú -->
        <div class="line-preview-item">
          <div class="line-preview-label">ÏúÑ Î∞©Ìñ• (‚Üë)</div>
          <svg class="line-preview-svg" width="150" height="120" viewBox="0 0 150 120">
            <defs>
              <marker id="arrow-up" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                <polygon points="0,0 0,15 15,7.5" fill="#667eea" />
              </marker>
            </defs>
            <line x1="75" y1="100" x2="75" y2="20" stroke="#667eea" stroke-width="3" marker-end="url(#arrow-up)" />
            <circle cx="75" cy="100" r="4" fill="#FFD700" />
          </svg>
        </div>

        <!-- ÏïÑÎûòÎ°ú -->
        <div class="line-preview-item">
          <div class="line-preview-label">ÏïÑÎûò Î∞©Ìñ• (‚Üì)</div>
          <svg class="line-preview-svg" width="150" height="120" viewBox="0 0 150 120">
            <defs>
              <marker id="arrow-down" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                <polygon points="0,0 0,15 15,7.5" fill="#667eea" />
              </marker>
            </defs>
            <line x1="75" y1="20" x2="75" y2="100" stroke="#667eea" stroke-width="3" marker-end="url(#arrow-down)" />
            <circle cx="75" cy="20" r="4" fill="#FFD700" />
          </svg>
        </div>

        <!-- ÎåÄÍ∞ÅÏÑ† Ïö∞ÏÉÅ -->
        <div class="line-preview-item">
          <div class="line-preview-label">ÎåÄÍ∞ÅÏÑ† Ïö∞ÏÉÅ (‚Üó)</div>
          <svg class="line-preview-svg" width="150" height="120" viewBox="0 0 150 120">
            <defs>
              <marker id="arrow-diagonal1" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                <polygon points="0,0 0,15 15,7.5" fill="#667eea" />
              </marker>
            </defs>
            <line x1="30" y1="90" x2="120" y2="30" stroke="#667eea" stroke-width="3" marker-end="url(#arrow-diagonal1)" />
            <circle cx="30" cy="90" r="4" fill="#FFD700" />
          </svg>
        </div>

        <!-- ÎåÄÍ∞ÅÏÑ† Ïö∞Ìïò -->
        <div class="line-preview-item">
          <div class="line-preview-label">ÎåÄÍ∞ÅÏÑ† Ïö∞Ìïò (‚Üò)</div>
          <svg class="line-preview-svg" width="150" height="120" viewBox="0 0 150 120">
            <defs>
              <marker id="arrow-diagonal2" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                <polygon points="0,0 0,15 15,7.5" fill="#667eea" />
              </marker>
            </defs>
            <line x1="30" y1="30" x2="120" y2="90" stroke="#667eea" stroke-width="3" marker-end="url(#arrow-diagonal2)" />
            <circle cx="30" cy="30" r="4" fill="#FFD700" />
          </svg>
        </div>

        <!-- ÎåÄÍ∞ÅÏÑ† Ï¢åÏÉÅ -->
        <div class="line-preview-item">
          <div class="line-preview-label">ÎåÄÍ∞ÅÏÑ† Ï¢åÏÉÅ (‚Üñ)</div>
          <svg class="line-preview-svg" width="150" height="120" viewBox="0 0 150 120">
            <defs>
              <marker id="arrow-diagonal3" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                <polygon points="0,0 0,15 15,7.5" fill="#667eea" />
              </marker>
            </defs>
            <line x1="120" y1="90" x2="30" y2="30" stroke="#667eea" stroke-width="3" marker-end="url(#arrow-diagonal3)" />
            <circle cx="120" cy="90" r="4" fill="#FFD700" />
          </svg>
        </div>

        <!-- Ïó∞Í≤∞ ÏôÑÎ£å -->
        <div class="line-preview-item">
          <div class="line-preview-label">Ïó∞Í≤∞ ÏôÑÎ£å (Ï†ïÎãµ)</div>
          <svg class="line-preview-svg" width="150" height="80" viewBox="0 0 150 80">
            <defs>
              <marker id="arrow-correct" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                <polygon points="0,0 0,15 15,7.5" fill="#4CAF50" />
              </marker>
            </defs>
            <line x1="20" y1="40" x2="130" y2="40" stroke="#4CAF50" stroke-width="3" marker-end="url(#arrow-correct)" />
            <circle cx="20" cy="40" r="4" fill="#667eea" />
            <circle cx="130" cy="40" r="4" fill="#667eea" />
          </svg>
        </div>
      </div>
    </div>

    <!-- Arrow Style Preview Section -->
    <div class="demo-card">
      <div class="demo-title">üìã Ïù∏ÌÑ∞ÎûôÏÖò Îã®Í≥ÑÎ≥Ñ Ïä§ÌÉÄÏùº ÌîÑÎ¶¨Î∑∞</div>
      <div class="demo-description">
        Í∞Å Ïù∏ÌÑ∞ÎûôÏÖò Îã®Í≥ÑÎ≥ÑÎ°ú Ìè¨Ïù∏Ìä∏ÏôÄ ÌôîÏÇ¥Ìëú Ïª§ÏÑúÏùò Ïä§ÌÉÄÏùºÏù¥ Ïñ¥ÎñªÍ≤å Î≥ÄÌïòÎäîÏßÄ ÌôïÏù∏Ìï† Ïàò ÏûàÏäµÎãàÎã§.
      </div>

      <div class="preview-grid">
        <!-- 1. Idle State -->
        <div class="preview-item">
          <div class="preview-label">1Ô∏è‚É£ Idle (Í∏∞Î≥∏ ÏÉÅÌÉú)</div>
          <div class="preview-visual">
            <div class="preview-point" style="background: #667eea;">A</div>
            <span class="preview-desc">Í∏∞Î≥∏ Ìè¨Ïù∏Ìä∏</span>
          </div>
        </div>

        <!-- 2. Hover State -->
        <div class="preview-item">
          <div class="preview-label">2Ô∏è‚É£ Hover (Ìò∏Î≤Ñ ÏÉÅÌÉú)</div>
          <div class="preview-visual">
            <div class="preview-point preview-point-hover" style="background: #764ba2; transform: scale(1.2);">A</div>
            <span class="preview-desc">ÎßàÏö∞Ïä§ Ïò§Î≤Ñ Ïãú</span>
          </div>
        </div>

        <!-- 3. Selected State -->
        <div class="preview-item">
          <div class="preview-label">3Ô∏è‚É£ Selected (ÏÑ†ÌÉùÎê®)</div>
          <div class="preview-visual">
            <div class="preview-point preview-point-selected" style="background: #FFD700; transform: scale(1.3); box-shadow: 0 0 15px rgba(255, 215, 0, 0.8);">A</div>
            <span class="preview-desc">ÌÅ¥Î¶≠/ÎìúÎûòÍ∑∏ ÏãúÏûë</span>
          </div>
        </div>

        <!-- 4. Dragging State -->
        <div class="preview-item">
          <div class="preview-label">4Ô∏è‚É£ Dragging (ÎìúÎûòÍ∑∏ Ï§ë)</div>
          <div class="preview-visual">
            <svg width="30" height="30" class="preview-arrow">
              <polygon
                points="15,18 7.5,12 22.5,12"
                fill="#667eea"
                style="filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));"
              />
            </svg>
            <span class="preview-desc">ÌôîÏÇ¥Ìëú Ïª§ÏÑú ÌëúÏãú</span>
          </div>
        </div>

        <!-- 5. Target Hint State -->
        <div class="preview-item">
          <div class="preview-label">5Ô∏è‚É£ Target Hint (Ïó∞Í≤∞ ÎåÄÏÉÅ)</div>
          <div class="preview-visual">
            <div class="preview-point" style="background: #667eea; box-shadow: 0 0 20px rgba(102, 126, 234, 0.8);">B</div>
            <span class="preview-desc">Ïó∞Í≤∞ Í∞ÄÎä• ÌûåÌä∏</span>
          </div>
        </div>

        <!-- 6. Connected State -->
        <div class="preview-item">
          <div class="preview-label">6Ô∏è‚É£ Connected (Ïó∞Í≤∞ ÏôÑÎ£å)</div>
          <div class="preview-visual">
            <div style="position: relative; display: flex; align-items: center; gap: 40px;">
              <div class="preview-point" style="background: #667eea;">A</div>
              <svg width="40" height="4" style="position: absolute; left: 30px;">
                <line x1="0" y1="2" x2="30" y2="2" stroke="#4CAF50" stroke-width="3" />
                <polygon points="30,2 26,0 26,4" fill="#4CAF50" />
              </svg>
              <div class="preview-point" style="background: #667eea;">B</div>
            </div>
            <span class="preview-desc">Ï†ïÎãµ Ïó∞Í≤∞</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- GSAP & Draggable -->
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.13/dist/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.13/dist/Draggable.min.js"></script>

  <!-- GSAP Kit Modules -->
  <script src="../dist/line-matching.min.js"></script>

  <script>
    let currentInstance = null;
    let hideCursorEnabled = true;
    let debugSvg = null;

    // Ï¥àÍ∏∞ Ïù∏Ïä§ÌÑ¥Ïä§ ÏÉùÏÑ±
    function createInstance(hideCursor) {
      // Í∏∞Ï°¥ Ïù∏Ïä§ÌÑ¥Ïä§ Ï†ïÎ¶¨
      if (currentInstance) {
        currentInstance.destroy();
      }

      // ÏÉà Ïù∏Ïä§ÌÑ¥Ïä§ ÏÉùÏÑ±
      currentInstance = createLineMatching({
        container: '#demo-custom-cursor',
        items: {
          'a': { selector: '[data-id="a"]', point: { x: 'right', y: 'center' } },
          'b1': { selector: '[data-id="b1"]', point: { x: 'left', y: 'center' } },
          'b2': { selector: '[data-id="b2"]', point: { x: 'left', y: 'center' } }
        },
        pairs: {
          'a': ['b1', 'b2']  // AÎäî B1 ÎòêÎäî B2ÏôÄ Ïó∞Í≤∞ Í∞ÄÎä•
        },
        lineStyle: 'arrow',
        lineWidth: 3,
        arrowSize: 15,
        hideCursor: hideCursor,  // Ïª§ÏÑú Ïà®ÍπÄ ÏòµÏÖò
        lineColor: '#667eea',
        correctColor: '#4CAF50',
        allowMultipleAttempts: true,
        showFeedback: true,
        onCorrect: (fromId, toId) => {
          console.log(`‚úÖ Ï†ïÎãµ! ${fromId} ‚Üí ${toId}`);
        },
        onIncorrect: (fromId, toId) => {
          console.log(`‚ùå Ïò§Îãµ: ${fromId} ‚Üí ${toId}`);
        }
      });

      updateModeStatus();
    }

    // Î™®Îìú Ï†ÑÌôò
    function toggleCursorMode() {
      hideCursorEnabled = !hideCursorEnabled;
      createInstance(hideCursorEnabled);
    }

    // ÏÉÅÌÉú ÌëúÏãú ÏóÖÎç∞Ïù¥Ìä∏
    function updateModeStatus() {
      const statusEl = document.getElementById('mode-status');
      if (hideCursorEnabled) {
        statusEl.textContent = 'üü¢ ÌòÑÏû¨ Î™®Îìú: ÏãúÏä§ÌÖú Ïª§ÏÑú Ïà®ÍπÄ (hideCursor: true)';
        statusEl.style.color = '#4CAF50';
      } else {
        statusEl.textContent = 'üî¥ ÌòÑÏû¨ Î™®Îìú: ÏãúÏä§ÌÖú Ïª§ÏÑú ÌëúÏãú (hideCursor: false)';
        statusEl.style.color = '#F44336';
      }
    }

    // ÎìúÎûòÍ∑∏ ÏÉÅÌÉú Í≥†Ï†ï (ÎîîÎ≤ÑÍ∑∏Ïö©)
    function freezeDragState() {
      const container = document.getElementById('demo-custom-cursor');
      const pointA = document.querySelector('[data-id="a"]');
      const pointB1 = document.querySelector('[data-id="b1"]');

      if (!pointA || !pointB1) {
        console.error('Ìè¨Ïù∏Ìä∏Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
        return;
      }

      // Í∏∞Ï°¥ ÎîîÎ≤ÑÍ∑∏ SVG Ï†úÍ±∞
      if (debugSvg) {
        debugSvg.remove();
      }

      // Ïª®ÌÖåÏù¥ÎÑàÏôÄ Ìè¨Ïù∏Ìä∏Ïùò ÏúÑÏπò Í≥ÑÏÇ∞
      const containerRect = container.getBoundingClientRect();
      const rectA = pointA.getBoundingClientRect();
      const rectB1 = pointB1.getBoundingClientRect();

      // AÏùò Ïò§Î•∏Ï™Ω Ï§ëÏïô (right, center)
      const x1 = rectA.right - containerRect.left;
      const y1 = rectA.top + rectA.height / 2 - containerRect.top;

      // B1Ïùò ÏôºÏ™Ω Ï§ëÏïô (left, center)
      const x2 = rectB1.left - containerRect.left;
      const y2 = rectB1.top + rectB1.height / 2 - containerRect.top;

      // SVG ÏÉùÏÑ±
      debugSvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
      debugSvg.setAttribute('width', containerRect.width);
      debugSvg.setAttribute('height', containerRect.height);
      debugSvg.style.position = 'absolute';
      debugSvg.style.top = '0';
      debugSvg.style.left = '0';
      debugSvg.style.pointerEvents = 'none';
      debugSvg.style.zIndex = '1000';

      // DefsÏôÄ Marker ÏÉùÏÑ±
      const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
      const marker = document.createElementNS('http://www.w3.org/2000/svg', 'marker');
      marker.setAttribute('id', 'debug-arrow');
      marker.setAttribute('markerWidth', '15');
      marker.setAttribute('markerHeight', '15');
      marker.setAttribute('refX', '12');
      marker.setAttribute('refY', '7.5');
      marker.setAttribute('orient', 'auto');

      const polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
      polygon.setAttribute('points', '0,0 0,15 15,7.5');
      polygon.setAttribute('fill', '#FF5722');

      marker.appendChild(polygon);
      defs.appendChild(marker);
      debugSvg.appendChild(defs);

      // Line ÏÉùÏÑ±
      const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
      line.setAttribute('x1', x1);
      line.setAttribute('y1', y1);
      line.setAttribute('x2', x2);
      line.setAttribute('y2', y2);
      line.setAttribute('stroke', '#FF5722');
      line.setAttribute('stroke-width', '4');
      line.setAttribute('marker-end', 'url(#debug-arrow)');

      debugSvg.appendChild(line);
      container.appendChild(debugSvg);

      // ÏÉÅÌÉú ÌëúÏãú
      const debugStatus = document.getElementById('debug-status');
      debugStatus.textContent = `üîç ÎîîÎ≤ÑÍ∑∏ Î™®Îìú: A(${Math.round(x1)}, ${Math.round(y1)}) ‚Üí B1(${Math.round(x2)}, ${Math.round(y2)})`;
      debugStatus.style.color = '#FF5722';

      console.log('üêõ ÎìúÎûòÍ∑∏ ÏÉÅÌÉú Í≥†Ï†ï:', { x1, y1, x2, y2 });
    }

    // ÎìúÎûòÍ∑∏ ÏÉÅÌÉú Í≥†Ï†ï Ìï¥Ï†ú
    function unfreezeDragState() {
      if (debugSvg) {
        debugSvg.remove();
        debugSvg = null;
      }

      const debugStatus = document.getElementById('debug-status');
      debugStatus.textContent = '‚úÖ ÎîîÎ≤ÑÍ∑∏ Î™®Îìú Ìï¥Ï†ú';
      debugStatus.style.color = '#4CAF50';
    }

    // Polygon pointsÎ•º Ïä§ÏºÄÏùºÎßÅÌïòÎäî Ìï®Ïàò
    function scalePolygonPoints(points, scale) {
      return points.split(' ').map(pair => {
        const [x, y] = pair.split(',').map(Number);
        return `${x * scale},${y * scale}`;
      }).join(' ');
    }

    // Shape Í∞íÏùÑ ÌååÏã±ÌïòÎäî Ìï®Ïàò
    function parseShapeValue(shapeValue) {
      const [type, data] = shapeValue.split(':');
      return { type, data };
    }

    // Marker ÏóòÎ¶¨Î®ºÌä∏ ÏÉùÏÑ± (polygon, circle, chevron Îì±)
    function createMarkerElement(type, data, color, scale) {
      const ns = 'http://www.w3.org/2000/svg';

      if (type === 'polygon') {
        const polygon = document.createElementNS(ns, 'polygon');
        const scaledPoints = scalePolygonPoints(data, scale);
        polygon.setAttribute('points', scaledPoints);
        polygon.setAttribute('fill', color);
        return { element: polygon, code: `<polygon points="${scaledPoints}" fill="${color}" />` };
      } else if (type === 'circle') {
        const circle = document.createElementNS(ns, 'circle');
        const radius = parseFloat(data) * scale;
        circle.setAttribute('cx', radius);
        circle.setAttribute('cy', radius);
        circle.setAttribute('r', radius);
        circle.setAttribute('fill', color);
        return { element: circle, code: `<circle cx="${radius}" cy="${radius}" r="${radius}" fill="${color}" />` };
      } else if (type === 'circle-stroke') {
        // Îπà ÏõêÌòï: Î∞∞Í≤Ω Ïõê + ÌÖåÎëêÎ¶¨ Ïõê (ÏÑ†ÏùÑ Í∞ÄÎ¶¨Í∏∞ ÏúÑÌï¥)
        const g = document.createElementNS(ns, 'g');
        const radius = parseFloat(data) * scale;
        const strokeWidth = Math.max(1, radius * 0.2);

        // Î∞∞Í≤Ω Ïõê (Ìù∞ÏÉâ, ÏÑ†ÏùÑ Í∞ÄÎ¶º)
        const bgCircle = document.createElementNS(ns, 'circle');
        bgCircle.setAttribute('cx', radius);
        bgCircle.setAttribute('cy', radius);
        bgCircle.setAttribute('r', radius - strokeWidth / 2);
        bgCircle.setAttribute('fill', 'white');

        // ÌÖåÎëêÎ¶¨ Ïõê
        const strokeCircle = document.createElementNS(ns, 'circle');
        strokeCircle.setAttribute('cx', radius);
        strokeCircle.setAttribute('cy', radius);
        strokeCircle.setAttribute('r', radius - strokeWidth / 2);
        strokeCircle.setAttribute('fill', 'none');
        strokeCircle.setAttribute('stroke', color);
        strokeCircle.setAttribute('stroke-width', strokeWidth);

        g.appendChild(bgCircle);
        g.appendChild(strokeCircle);

        const code = `<circle cx="${radius}" cy="${radius}" r="${radius - strokeWidth / 2}" fill="white" />
    <circle cx="${radius}" cy="${radius}" r="${radius - strokeWidth / 2}" fill="none" stroke="${color}" stroke-width="${strokeWidth}" />`;

        return { element: g, code };
      } else if (type === 'chevron') {
        // Ïó¥Î¶∞ ÏÇºÍ∞ÅÌòï: Í∫æÏù∏ ÎßâÎåÄÍ∏∞ ÌòïÌÉú (polyline with stroke)
        // Íº≠ÏßÄÏ†êÏù¥ Ïò§Î•∏Ï™Ω(ÏÑ† ÎÅù)Ïóê Ïò§ÎèÑÎ°ù Î∞∞Ïπò
        const size = parseFloat(data) * scale;
        const strokeWidth = Math.max(1.5, size * 0.15);

        // V ÌòïÌÉúÏùò polyline - Íº≠ÏßÄÏ†êÏù¥ Ïò§Î•∏Ï™ΩÏóê ÏúÑÏπò
        const polyline = document.createElementNS(ns, 'polyline');
        const height = size * 0.7; // Ïó¥Î¶º ÎÜíÏù¥
        const points = `0,${size - height} ${size},${size} 0,${size + height}`;
        polyline.setAttribute('points', points);
        polyline.setAttribute('fill', 'none');
        polyline.setAttribute('stroke', color);
        polyline.setAttribute('stroke-width', strokeWidth);
        polyline.setAttribute('stroke-linecap', 'round');
        polyline.setAttribute('stroke-linejoin', 'round');

        return { element: polyline, code: `<polyline points="${points}" fill="none" stroke="${color}" stroke-width="${strokeWidth}" stroke-linecap="round" stroke-linejoin="round" />` };
      }
    }

    // ÎßàÏª§ ÌÅ¨Í∏∞ ÏûêÎèô Í≥ÑÏÇ∞
    function calculateMarkerDimensions(type, data, scale) {
      if (type === 'polygon') {
        const points = data.split(' ').map(pair => {
          const [x, y] = pair.split(',').map(Number);
          return { x, y };
        });
        const maxX = Math.max(...points.map(p => p.x));
        const maxY = Math.max(...points.map(p => p.y));
        return {
          width: maxX * scale,
          height: maxY * scale
        };
      } else if (type === 'circle' || type === 'circle-stroke') {
        const radius = parseFloat(data);
        const diameter = radius * 2 * scale;
        return {
          width: diameter,
          height: diameter
        };
      } else if (type === 'chevron') {
        const size = parseFloat(data) * scale;
        const height = size * 0.7;
        return {
          width: size,
          height: size + height // 1.7 * size
        };
      }
      return { width: 15, height: 15 }; // fallback
    }

    // Marker ÌååÎùºÎØ∏ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏
    function updateMarkerParams() {
      // ÌååÎùºÎØ∏ÌÑ∞ Í∞í ÏùΩÍ∏∞
      const refX = parseFloat(document.getElementById('refX').value);
      const refY = parseFloat(document.getElementById('refY').value);
      const shapeValue = document.getElementById('polygonShape').value;
      const lineWidth = parseFloat(document.getElementById('lineWidth').value);
      const markerScale = parseFloat(document.getElementById('markerScale').value);
      const markerColor = document.getElementById('markerColor').value;
      const useStrokeWidth = document.getElementById('markerUnits').checked;

      // Shape ÌååÏã±
      const { type, data } = parseShapeValue(shapeValue);
      const { code: markerCode } = createMarkerElement(type, data, markerColor, markerScale);

      // ÎßàÏª§ ÌÅ¨Í∏∞ ÏûêÎèô Í≥ÑÏÇ∞
      const { width: markerWidth, height: markerHeight } = calculateMarkerDimensions(type, data, markerScale);

      const scaledRefX = refX * markerScale;
      const scaledRefY = refY * markerScale;

      // Í∞í ÌëúÏãú ÏóÖÎç∞Ïù¥Ìä∏
      document.getElementById('refXValue').textContent = refX;
      document.getElementById('refYValue').textContent = refY;
      document.getElementById('lineWidthValue').textContent = lineWidth;
      document.getElementById('markerScaleValue').textContent = markerScale;
      document.getElementById('markerColorValue').textContent = markerColor;

      // ÏΩîÎìú ÌëúÏãú ÏóÖÎç∞Ïù¥Ìä∏
      const markerUnitsAttr = useStrokeWidth ? '\n    markerUnits="strokeWidth"' : '';
      const code = `<defs>
  <marker id="arrow"
    markerWidth="${markerWidth}"
    markerHeight="${markerHeight}"
    refX="${scaledRefX}"
    refY="${scaledRefY}"
    orient="auto"${markerUnitsAttr}>
    ${markerCode}
  </marker>
</defs>
<line x1="..." y1="..." x2="..." y2="..."
  stroke="${markerColor}"
  stroke-width="${lineWidth}"
  marker-end="url(#arrow)" />`;

      document.getElementById('paramCode').textContent = code;

      // SVG ÌîÑÎ¶¨Î∑∞ Î†åÎçîÎßÅ
      updateSvgPreview(markerWidth, markerHeight, scaledRefX, scaledRefY, type, data, markerScale, lineWidth, markerColor, useStrokeWidth);

      // ÎîîÎ≤ÑÍ∑∏ SVGÍ∞Ä ÏûàÏúºÎ©¥ Ïã§ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏
      if (debugSvg) {
        updateDebugSvgWithParams(markerWidth, markerHeight, scaledRefX, scaledRefY, type, data, markerScale, lineWidth, markerColor, useStrokeWidth);
      }
    }

    // SVG ÌîÑÎ¶¨Î∑∞ Î†åÎçîÎßÅ
    function updateSvgPreview(markerWidth, markerHeight, refX, refY, shapeType, shapeData, scale, lineWidth, markerColor, useStrokeWidth = false) {
      const previewContainer = document.getElementById('svgPreview');

      // Í∏∞Ï°¥ SVG Ï†úÍ±∞
      previewContainer.innerHTML = '';

      // ÏÉà SVG ÏÉùÏÑ±
      const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
      svg.setAttribute('width', '250');
      svg.setAttribute('height', '100');
      svg.setAttribute('viewBox', '0 0 250 100');

      // DefsÏôÄ Marker ÏÉùÏÑ±
      const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
      const marker = document.createElementNS('http://www.w3.org/2000/svg', 'marker');
      marker.setAttribute('id', 'preview-arrow');
      marker.setAttribute('markerWidth', markerWidth);
      marker.setAttribute('markerHeight', markerHeight);
      marker.setAttribute('refX', refX);
      marker.setAttribute('refY', refY);
      marker.setAttribute('orient', 'auto');

      if (useStrokeWidth) {
        marker.setAttribute('markerUnits', 'strokeWidth');
      }

      // Marker ÏóòÎ¶¨Î®ºÌä∏ ÏÉùÏÑ±
      const { element } = createMarkerElement(shapeType, shapeData, markerColor, scale);
      marker.appendChild(element);
      defs.appendChild(marker);
      svg.appendChild(defs);

      // 3Í∞úÏùò ÏÑ† ÏÉùÏÑ± (Îã§ÏñëÌïú Í∞ÅÎèÑ)
      const lines = [
        { x1: 20, y1: 50, x2: 80, y2: 50, label: '‚Üí' },
        { x1: 100, y1: 70, x2: 150, y2: 30, label: '‚Üó' },
        { x1: 170, y1: 30, x2: 220, y2: 70, label: '‚Üò' }
      ];

      lines.forEach(({ x1, y1, x2, y2 }) => {
        const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        line.setAttribute('x1', x1);
        line.setAttribute('y1', y1);
        line.setAttribute('x2', x2);
        line.setAttribute('y2', y2);
        line.setAttribute('stroke', markerColor);
        line.setAttribute('stroke-width', lineWidth);
        line.setAttribute('marker-end', 'url(#preview-arrow)');
        svg.appendChild(line);
      });

      previewContainer.appendChild(svg);
    }

    // ÎîîÎ≤ÑÍ∑∏ SVGÎ•º ÏÉà ÌååÎùºÎØ∏ÌÑ∞Î°ú ÏóÖÎç∞Ïù¥Ìä∏
    function updateDebugSvgWithParams(markerWidth, markerHeight, refX, refY, shapeType, shapeData, scale, lineWidth, markerColor, useStrokeWidth = false) {
      if (!debugSvg) return;

      const container = document.getElementById('demo-custom-cursor');
      const pointA = document.querySelector('[data-id="a"]');
      const pointB1 = document.querySelector('[data-id="b1"]');

      if (!pointA || !pointB1) return;

      const containerRect = container.getBoundingClientRect();
      const rectA = pointA.getBoundingClientRect();
      const rectB1 = pointB1.getBoundingClientRect();

      const x1 = rectA.right - containerRect.left;
      const y1 = rectA.top + rectA.height / 2 - containerRect.top;
      const x2 = rectB1.left - containerRect.left;
      const y2 = rectB1.top + rectB1.height / 2 - containerRect.top;

      // Í∏∞Ï°¥ SVG Ï†úÍ±∞ Î∞è ÏÉàÎ°ú ÏÉùÏÑ±
      debugSvg.remove();

      debugSvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
      debugSvg.setAttribute('width', containerRect.width);
      debugSvg.setAttribute('height', containerRect.height);
      debugSvg.style.position = 'absolute';
      debugSvg.style.top = '0';
      debugSvg.style.left = '0';
      debugSvg.style.pointerEvents = 'none';
      debugSvg.style.zIndex = '1000';

      // DefsÏôÄ Marker ÏÉùÏÑ± (marker-end Î∞©Ïãù)
      const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
      const marker = document.createElementNS('http://www.w3.org/2000/svg', 'marker');
      marker.setAttribute('id', 'debug-arrow-marker');
      marker.setAttribute('markerWidth', markerWidth);
      marker.setAttribute('markerHeight', markerHeight);
      marker.setAttribute('refX', refX);
      marker.setAttribute('refY', refY);
      marker.setAttribute('orient', 'auto');

      if (useStrokeWidth) {
        marker.setAttribute('markerUnits', 'strokeWidth');
      }

      // Marker ÏóòÎ¶¨Î®ºÌä∏ ÏÉùÏÑ±
      const { element } = createMarkerElement(shapeType, shapeData, markerColor, scale);
      marker.appendChild(element);
      defs.appendChild(marker);
      debugSvg.appendChild(defs);

      // Line ÏÉùÏÑ± (marker-end ÏÇ¨Ïö©)
      const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
      line.setAttribute('x1', x1);
      line.setAttribute('y1', y1);
      line.setAttribute('x2', x2);
      line.setAttribute('y2', y2);
      line.setAttribute('stroke', markerColor);
      line.setAttribute('stroke-width', lineWidth);
      line.setAttribute('marker-end', 'url(#debug-arrow-marker)');

      debugSvg.appendChild(line);
      container.appendChild(debugSvg);
    }

    // Ï¥àÍ∏∞ Ïã§Ìñâ
    createInstance(hideCursorEnabled);
    updateMarkerParams(); // Ï¥àÍ∏∞ ÌååÎùºÎØ∏ÌÑ∞ ÏΩîÎìú ÌëúÏãú

    console.log('üéØ Custom Cursor Îç∞Î™® Î°úÎìú ÏôÑÎ£å!');
    console.log('A Ìè¨Ïù∏Ìä∏Î•º ÎìúÎûòÍ∑∏ÌïòÏó¨ B1 ÎòêÎäî B2ÏôÄ Ïó∞Í≤∞Ìï¥Î≥¥ÏÑ∏Ïöî.');
    console.log('ÎìúÎûòÍ∑∏ Ï§ëÏóêÎäî ÏãúÏä§ÌÖú Ïª§ÏÑúÍ∞Ä Ïà®Í≤®ÏßÄÍ≥† ÌôîÏÇ¥Ìëú Ïª§ÏÑúÎßå ÌëúÏãúÎê©ÎãàÎã§.');
  </script>
</body>
</html>
